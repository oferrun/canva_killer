{
  "operations": [
    {
      "name": "create_canvas",
      "id": "create_canvas",
      "description": "Create a new canvas with specified resolution and DPI. This operation MUST be called before any other operations as it initializes the working surface.",
      "parameters": {
        "mandatory": [
          {
            "name": "width",
            "type": "number",
            "description": "Canvas width in pixels."
          },
          {
            "name": "height",
            "type": "number",
            "description": "Canvas height in pixels."
          },
          {
            "name": "dpi",
            "type": "number",
            "description": "Dots per inch. Use 72 for screen/web, 150 for moderate print, 300 for high-quality print.",
            "valid_values": [72, 150, 300]
          }
        ],
        "optional": [
          {
            "name": "background_color",
            "type": "string",
            "description": "Initial canvas fill color as hex string or 'transparent'.",
            "default": "#FFFFFF"
          }
        ]
      }
    },
    {
      "name": "generate_image",
      "id": "generate_image",
      "description": "Generate a new image from a text prompt using an AI model.",
      "parameters": {
        "mandatory": [
          {
            "name": "prompt",
            "type": "string",
            "description": "Text description of the image to generate."
          },
          {
            "name": "model",
            "type": "string",
            "description": "The AI model to use for generation.",
            "valid_values": ["z-turbo", "nano-banana", "nano-banana-pro"]
          },
          {
            "name": "aspect_ratio",
            "type": "string",
            "description": "Aspect ratio of the output image.",
            "valid_values": ["1:1", "16:9", "9:16", "4:3", "3:4", "3:2", "2:3"]
          }
        ],
        "optional": [
          {
            "name": "seed",
            "type": "number",
            "description": "Random seed for reproducible generation.",
            "default": null
          },
          {
            "name": "output_format",
            "type": "string",
            "description": "Format of the output image.",
            "valid_values": ["png", "jpg", "webp"],
            "default": "png"
          }
        ]
      }
    },
    {
      "name": "edit_image",
      "id": "edit_image",
      "description": "Edit an existing image using an AI model guided by a text prompt.",
      "parameters": {
        "mandatory": [
          {
            "name": "prompt",
            "type": "string",
            "description": "Text description of the desired edit."
          },
          {
            "name": "model",
            "type": "string",
            "description": "The AI model to use for editing.",
            "valid_values": ["z-turbo", "nano-banana", "nano-banana-pro"]
          },
          {
            "name": "input_image",
            "type": "string",
            "description": "Path or URL of the image to edit."
          }
        ],
        "optional": [
          {
            "name": "additional_images",
            "type": "string[]",
            "description": "Paths or URLs of additional reference images.",
            "default": []
          },
          {
            "name": "strength",
            "type": "number",
            "description": "How much to alter the original image (0.0 = no change, 1.0 = full regeneration).",
            "default": 0.75,
            "min": 0.0,
            "max": 1.0
          },
          {
            "name": "output_format",
            "type": "string",
            "description": "Format of the output image.",
            "valid_values": ["png", "jpg", "webp"],
            "default": "png"
          }
        ]
      }
    },
    {
      "name": "resize_image",
      "id": "resize_image",
      "description": "Resize an image to specified dimensions.",
      "parameters": {
        "mandatory": [
          {
            "name": "input_image",
            "type": "string",
            "description": "Path or URL of the image to resize."
          }
        ],
        "optional": [
          {
            "name": "width",
            "type": "number",
            "description": "Target width in pixels. If only width is set and maintain_aspect_ratio is true, height is calculated automatically.",
            "default": null
          },
          {
            "name": "height",
            "type": "number",
            "description": "Target height in pixels. If only height is set and maintain_aspect_ratio is true, width is calculated automatically.",
            "default": null
          },
          {
            "name": "scale",
            "type": "number",
            "description": "Scale factor (e.g. 0.5 = half size, 2.0 = double). Used when width/height are not specified.",
            "default": null
          },
          {
            "name": "maintain_aspect_ratio",
            "type": "boolean",
            "description": "Whether to preserve the original aspect ratio when only one dimension is specified.",
            "default": true
          },
          {
            "name": "resample_method",
            "type": "string",
            "description": "Resampling algorithm to use.",
            "valid_values": ["nearest", "bilinear", "bicubic", "lanczos"],
            "default": "lanczos"
          },
          {
            "name": "output_format",
            "type": "string",
            "description": "Format of the output image.",
            "valid_values": ["png", "jpg", "webp"],
            "default": "png"
          }
        ]
      }
    },
    {
      "name": "crop_image",
      "id": "crop_image",
      "description": "Crop an image either to exact dimensions at a position, or using smart content-aware cropping.",
      "parameters": {
        "mandatory": [
          {
            "name": "input_image",
            "type": "string",
            "description": "Path or URL of the image to crop."
          },
          {
            "name": "mode",
            "type": "string",
            "description": "Cropping mode: 'manual' for exact coordinates, 'smart' for content-aware tight crop with optional padding.",
            "valid_values": ["manual", "smart"]
          }
        ],
        "optional": [
          {
            "name": "x",
            "type": "number",
            "description": "Left edge of crop rectangle in pixels. Required when mode is 'manual'.",
            "default": 0
          },
          {
            "name": "y",
            "type": "number",
            "description": "Top edge of crop rectangle in pixels. Required when mode is 'manual'.",
            "default": 0
          },
          {
            "name": "width",
            "type": "number",
            "description": "Width of crop rectangle in pixels. Required when mode is 'manual'.",
            "default": null
          },
          {
            "name": "height",
            "type": "number",
            "description": "Height of crop rectangle in pixels. Required when mode is 'manual'.",
            "default": null
          },
          {
            "name": "padding",
            "type": "number",
            "description": "Padding in pixels around the detected content. Used when mode is 'smart'.",
            "default": 0
          },
          {
            "name": "target_aspect_ratio",
            "type": "string",
            "description": "Force the smart crop to conform to this aspect ratio.",
            "valid_values": ["1:1", "16:9", "9:16", "4:3", "3:4", "3:2", "2:3", "free"],
            "default": "free"
          },
          {
            "name": "output_format",
            "type": "string",
            "description": "Format of the output image.",
            "valid_values": ["png", "jpg", "webp"],
            "default": "png"
          }
        ]
      }
    },
    {
      "name": "add_image_layer",
      "id": "add_image_layer",
      "description": "Add a named image layer to the canvas. The layer name can be used later to edit, reorder, or reference this layer.",
      "parameters": {
        "mandatory": [
          {
            "name": "layer_name",
            "type": "string",
            "description": "Unique name for this image layer, used to reference it in subsequent operations (e.g. 'background_photo', 'logo', 'product_shot')."
          },
          {
            "name": "input_image",
            "type": "string",
            "description": "Path or URL of the image to place on the canvas."
          }
        ],
        "optional": [
          {
            "name": "x",
            "type": "number",
            "description": "Horizontal position of the layer's top-left corner in pixels.",
            "default": 0
          },
          {
            "name": "y",
            "type": "number",
            "description": "Vertical position of the layer's top-left corner in pixels.",
            "default": 0
          },
          {
            "name": "width",
            "type": "number",
            "description": "Display width in pixels. Default is the image's own width. If only width is set, height is scaled proportionally.",
            "default": null
          },
          {
            "name": "height",
            "type": "number",
            "description": "Display height in pixels. Default is the image's own height. If only height is set, width is scaled proportionally.",
            "default": null
          },
          {
            "name": "fit",
            "type": "string",
            "description": "How the image fits within the specified width/height bounds.",
            "valid_values": ["fill", "contain", "cover"],
            "default": "contain"
          },
          {
            "name": "opacity",
            "type": "number",
            "description": "Layer opacity (0.0 = transparent, 1.0 = fully opaque).",
            "default": 1.0,
            "min": 0.0,
            "max": 1.0
          },
          {
            "name": "rotation",
            "type": "number",
            "description": "Rotation angle in degrees.",
            "default": 0
          },
          {
            "name": "blend_mode",
            "type": "string",
            "description": "Blending mode for compositing this layer.",
            "valid_values": ["normal", "multiply", "screen", "overlay", "darken", "lighten"],
            "default": "normal"
          },
          {
            "name": "shadow_enabled",
            "type": "boolean",
            "description": "Whether to apply a drop shadow to the image layer.",
            "default": false
          },
          {
            "name": "shadow_color",
            "type": "string",
            "description": "Drop shadow color as hex string.",
            "default": "#000000"
          },
          {
            "name": "shadow_offset_x",
            "type": "number",
            "description": "Horizontal shadow offset in pixels.",
            "default": 2
          },
          {
            "name": "shadow_offset_y",
            "type": "number",
            "description": "Vertical shadow offset in pixels.",
            "default": 2
          },
          {
            "name": "shadow_blur",
            "type": "number",
            "description": "Shadow blur radius in pixels.",
            "default": 4
          },
          {
            "name": "shadow_opacity",
            "type": "number",
            "description": "Shadow opacity (0.0 = transparent, 1.0 = fully opaque).",
            "default": 0.5,
            "min": 0.0,
            "max": 1.0
          },
          {
            "name": "border_radius",
            "type": "number",
            "description": "Corner rounding radius in pixels. 0 = sharp corners.",
            "default": 0
          }
        ]
      }
    },
    {
      "name": "add_text_layer",
      "id": "add_text_layer",
      "description": "Add a named text layer on top of an image or canvas. The layer name can be used later to edit or reference this layer.",
      "parameters": {
        "mandatory": [
          {
            "name": "layer_name",
            "type": "string",
            "description": "Unique name for this text layer, used to reference it in subsequent operations (e.g. 'title', 'subtitle', 'footer_note')."
          },
          {
            "name": "text",
            "type": "string",
            "description": "The text content to display."
          },
          {
            "name": "font",
            "type": "string",
            "description": "Font family name (e.g. 'Arial', 'Roboto', 'Playfair Display')."
          },
          {
            "name": "size",
            "type": "number",
            "description": "Font size in pixels."
          },
          {
            "name": "color",
            "type": "string",
            "description": "Text color as hex string (e.g. '#FF0000') or CSS color name."
          }
        ],
        "optional": [
          {
            "name": "x",
            "type": "number",
            "description": "Horizontal position in pixels. ONLY use this when the user provides specific pixel coordinates. DO NOT use for centering - text is centered by default when x/y/anchor are omitted.",
            "default": null
          },
          {
            "name": "y",
            "type": "number",
            "description": "Vertical position in pixels. ONLY use this when the user provides specific pixel coordinates. DO NOT use for centering - text is centered by default when x/y/anchor are omitted.",
            "default": null
          },
          {
            "name": "anchor",
            "type": "string",
            "description": "Position text using semantic anchor points instead of x/y coordinates. When specified, x and y are ignored. Valid values: 'center', 'top-left', 'top-center', 'top-right', 'center-left', 'center-right', 'bottom-left', 'bottom-center', 'bottom-right'.",
            "valid_values": ["top-left", "top-center", "top-right", "center-left", "center", "center-right", "bottom-left", "bottom-center", "bottom-right"],
            "default": null
          },
          {
            "name": "offset_x",
            "type": "number",
            "description": "Horizontal offset from anchor point in pixels (positive = right). Only used with anchor parameter.",
            "default": 0
          },
          {
            "name": "offset_y",
            "type": "number",
            "description": "Vertical offset from anchor point in pixels (positive = down). Only used with anchor parameter.",
            "default": 0
          },
          {
            "name": "alignment",
            "type": "string",
            "description": "Horizontal text alignment.",
            "valid_values": ["left", "center", "right"],
            "default": "left"
          },
          {
            "name": "bold",
            "type": "boolean",
            "description": "Whether the text is bold.",
            "default": false
          },
          {
            "name": "italic",
            "type": "boolean",
            "description": "Whether the text is italic.",
            "default": false
          },
          {
            "name": "opacity",
            "type": "number",
            "description": "Text opacity (0.0 = transparent, 1.0 = fully opaque).",
            "default": 1.0,
            "min": 0.0,
            "max": 1.0
          },
          {
            "name": "rotation",
            "type": "number",
            "description": "Rotation angle in degrees.",
            "default": 0
          },
          {
            "name": "max_width",
            "type": "number",
            "description": "Maximum width in pixels before text wraps.",
            "default": null
          },
          {
            "name": "line_height",
            "type": "number",
            "description": "Line height multiplier for multi-line text.",
            "default": 1.2
          },
          {
            "name": "stroke_color",
            "type": "string",
            "description": "Text outline/stroke color as hex string.",
            "default": null
          },
          {
            "name": "stroke_width",
            "type": "number",
            "description": "Text outline/stroke width in pixels.",
            "default": 0
          },
          {
            "name": "curvature",
            "type": "number",
            "description": "Text path curvature in degrees. 0 = straight, positive = arc upward, negative = arc downward. Range -360 to 360.",
            "default": 0,
            "min": -360,
            "max": 360
          },
          {
            "name": "shadow_enabled",
            "type": "boolean",
            "description": "Whether to apply a drop shadow to the text.",
            "default": false
          },
          {
            "name": "shadow_color",
            "type": "string",
            "description": "Drop shadow color as hex string.",
            "default": "#000000"
          },
          {
            "name": "shadow_offset_x",
            "type": "number",
            "description": "Horizontal shadow offset in pixels.",
            "default": 2
          },
          {
            "name": "shadow_offset_y",
            "type": "number",
            "description": "Vertical shadow offset in pixels.",
            "default": 2
          },
          {
            "name": "shadow_blur",
            "type": "number",
            "description": "Shadow blur radius in pixels.",
            "default": 4
          },
          {
            "name": "shadow_opacity",
            "type": "number",
            "description": "Shadow opacity (0.0 = transparent, 1.0 = fully opaque).",
            "default": 0.5,
            "min": 0.0,
            "max": 1.0
          }
        ]
      }
    },
    {
      "name": "edit_text_layer",
      "id": "edit_text_layer",
      "description": "Edit an existing text layer by name. Any provided parameter will override the current value; omitted parameters remain unchanged.",
      "parameters": {
        "mandatory": [
          {
            "name": "layer_name",
            "type": "string",
            "description": "The name of the text layer to edit (as set in add_text_layer)."
          }
        ],
        "optional": [
          {
            "name": "text",
            "type": "string",
            "description": "New text content.",
            "default": null
          },
          {
            "name": "font",
            "type": "string",
            "description": "New font family name.",
            "default": null
          },
          {
            "name": "size",
            "type": "number",
            "description": "New font size in pixels.",
            "default": null
          },
          {
            "name": "color",
            "type": "string",
            "description": "New text color as hex string or CSS color name.",
            "default": null
          },
          {
            "name": "x",
            "type": "number",
            "description": "New horizontal position in pixels.",
            "default": null
          },
          {
            "name": "y",
            "type": "number",
            "description": "New vertical position in pixels.",
            "default": null
          },
          {
            "name": "alignment",
            "type": "string",
            "description": "New horizontal text alignment.",
            "valid_values": ["left", "center", "right"],
            "default": null
          },
          {
            "name": "bold",
            "type": "boolean",
            "description": "Whether the text is bold.",
            "default": null
          },
          {
            "name": "italic",
            "type": "boolean",
            "description": "Whether the text is italic.",
            "default": null
          },
          {
            "name": "opacity",
            "type": "number",
            "description": "Text opacity (0.0 = transparent, 1.0 = fully opaque).",
            "default": null,
            "min": 0.0,
            "max": 1.0
          },
          {
            "name": "rotation",
            "type": "number",
            "description": "Rotation angle in degrees.",
            "default": null
          },
          {
            "name": "max_width",
            "type": "number",
            "description": "Maximum width in pixels before text wraps.",
            "default": null
          },
          {
            "name": "line_height",
            "type": "number",
            "description": "Line height multiplier for multi-line text.",
            "default": null
          },
          {
            "name": "stroke_color",
            "type": "string",
            "description": "Text outline/stroke color as hex string.",
            "default": null
          },
          {
            "name": "stroke_width",
            "type": "number",
            "description": "Text outline/stroke width in pixels.",
            "default": null
          },
          {
            "name": "curvature",
            "type": "number",
            "description": "Text path curvature in degrees. 0 = straight, positive = arc upward, negative = arc downward. Range -360 to 360.",
            "default": null,
            "min": -360,
            "max": 360
          },
          {
            "name": "shadow_enabled",
            "type": "boolean",
            "description": "Whether to apply a drop shadow to the text.",
            "default": null
          },
          {
            "name": "shadow_color",
            "type": "string",
            "description": "Drop shadow color as hex string.",
            "default": null
          },
          {
            "name": "shadow_offset_x",
            "type": "number",
            "description": "Horizontal shadow offset in pixels.",
            "default": null
          },
          {
            "name": "shadow_offset_y",
            "type": "number",
            "description": "Vertical shadow offset in pixels.",
            "default": null
          },
          {
            "name": "shadow_blur",
            "type": "number",
            "description": "Shadow blur radius in pixels.",
            "default": null
          },
          {
            "name": "shadow_opacity",
            "type": "number",
            "description": "Shadow opacity (0.0 = transparent, 1.0 = fully opaque).",
            "default": null,
            "min": 0.0,
            "max": 1.0
          }
        ]
      }
    },
    {
      "name": "set_layer_visibility",
      "id": "set_layer_visibility",
      "description": "Set the visibility of an existing layer (image or text) by name. Hidden layers are preserved and can be shown again.",
      "parameters": {
        "mandatory": [
          {
            "name": "layer_name",
            "type": "string",
            "description": "The name of the layer to show or hide."
          }
        ],
        "optional": [
          {
            "name": "visible",
            "type": "boolean",
            "description": "Set to false to hide, true to show.",
            "default": false
          }
        ]
      }
    },
    {
      "name": "delete_layer",
      "id": "delete_layer",
      "description": "Permanently remove a layer (image or text) from the canvas by name. This action cannot be undone.",
      "parameters": {
        "mandatory": [
          {
            "name": "layer_name",
            "type": "string",
            "description": "The name of the layer to delete."
          }
        ],
        "optional": []
      }
    },
    {
      "name": "remove_background",
      "id": "remove_background",
      "description": "Remove the background from an image, producing an image with a transparent alpha channel around the subject.",
      "parameters": {
        "mandatory": [
          {
            "name": "input_image",
            "type": "string",
            "description": "Path or URL of the image to remove the background from."
          }
        ],
        "optional": [
          {
            "name": "refine_edges",
            "type": "boolean",
            "description": "Apply edge refinement for smoother cutouts (hair, fur, etc.).",
            "default": true
          },
          {
            "name": "background_color",
            "type": "string",
            "description": "If set, replace background with this color instead of transparency. Hex string (e.g. '#FFFFFF') or 'transparent'.",
            "default": "transparent"
          },
          {
            "name": "output_format",
            "type": "string",
            "description": "Format of the output image. Use 'png' or 'webp' to preserve transparency.",
            "valid_values": ["png", "webp"],
            "default": "png"
          }
        ]
      }
    },
    {
      "name": "up_scale",
      "id": "up_scale",
      "description": "Upscale an image to a higher resolution using an AI super-resolution model.",
      "parameters": {
        "mandatory": [
          {
            "name": "input_image",
            "type": "string",
            "description": "Path or URL of the image to upscale."
          }
        ],
        "optional": [
          {
            "name": "scale_factor",
            "type": "number",
            "description": "Multiplier for the output resolution.",
            "valid_values": [2, 4],
            "default": 2
          },
          {
            "name": "output_format",
            "type": "string",
            "description": "Format of the output image.",
            "valid_values": ["png", "jpg", "webp"],
            "default": "png"
          }
        ]
      }
    },
    {
      "name": "segment",
      "id": "segment",
      "description": "Segment objects in an image using text prompts (category names) or visual prompts (point coordinates, bounding boxes). Returns binary masks and bounding boxes for each detected object.",
      "parameters": {
        "mandatory": [
          {
            "name": "input_image",
            "type": "string",
            "description": "Path or URL of the image to segment."
          },
          {
            "name": "prompt_type",
            "type": "string",
            "description": "Type of prompt to guide segmentation: 'text' for category names, 'points' for coordinate clicks, 'boxes' for bounding box regions.",
            "valid_values": ["text", "points", "boxes"]
          }
        ],
        "optional": [
          {
            "name": "categories",
            "type": "string[]",
            "description": "List of object category names to segment (e.g. ['person', 'car', 'dog']). Used when prompt_type is 'text'.",
            "default": []
          },
          {
            "name": "points",
            "type": "object[]",
            "description": "List of point prompts, each with {x, y, label} where label is 1 for foreground and 0 for background. Used when prompt_type is 'points'.",
            "default": [],
            "item_schema": {
              "x": "number (pixel coordinate)",
              "y": "number (pixel coordinate)",
              "label": "number (1 = foreground, 0 = background)"
            }
          },
          {
            "name": "boxes",
            "type": "object[]",
            "description": "List of bounding box prompts, each with {x0, y0, x1, y1} defining the top-left and bottom-right corners. Used when prompt_type is 'boxes'.",
            "default": [],
            "item_schema": {
              "x0": "number (left edge pixel)",
              "y0": "number (top edge pixel)",
              "x1": "number (right edge pixel)",
              "y1": "number (bottom edge pixel)"
            }
          },
          {
            "name": "confidence_threshold",
            "type": "number",
            "description": "Minimum confidence score to include a detected segment.",
            "default": 0.5,
            "min": 0.0,
            "max": 1.0
          },
          {
            "name": "return_format",
            "type": "string",
            "description": "What to return: 'masks' for binary mask images, 'cutouts' for cropped objects with transparent backgrounds, 'both' for masks and cutouts.",
            "valid_values": ["masks", "cutouts", "both"],
            "default": "masks"
          },
          {
            "name": "output_format",
            "type": "string",
            "description": "Format of the output images.",
            "valid_values": ["png", "webp"],
            "default": "png"
          }
        ]
      }
    },
    {
      "name": "set_layer_anchor",
      "id": "set_layer_anchor",
      "description": "Position a layer using anchor points relative to the canvas or another layer. This replaces manual x/y positioning with semantic alignment.",
      "parameters": {
        "mandatory": [
          {
            "name": "layer_name",
            "type": "string",
            "description": "The name of the layer to position."
          },
          {
            "name": "anchor",
            "type": "string",
            "description": "Where to place the layer's anchor point.",
            "valid_values": ["top-left", "top-center", "top-right", "center-left", "center", "center-right", "bottom-left", "bottom-center", "bottom-right"]
          }
        ],
        "optional": [
          {
            "name": "relative_to",
            "type": "string",
            "description": "Name of another layer to anchor relative to. If omitted, anchors relative to the canvas.",
            "default": null
          },
          {
            "name": "offset_x",
            "type": "number",
            "description": "Horizontal offset from the anchor point in pixels (positive = right).",
            "default": 0
          },
          {
            "name": "offset_y",
            "type": "number",
            "description": "Vertical offset from the anchor point in pixels (positive = down).",
            "default": 0
          }
        ]
      }
    },
    {
      "name": "create_flex_container",
      "id": "create_flex_container",
      "description": "Create a named flex layout container on the canvas. Layers added to this container are arranged automatically using flexbox rules instead of absolute positioning.",
      "parameters": {
        "mandatory": [
          {
            "name": "container_name",
            "type": "string",
            "description": "Unique name for this flex container, used to add child layers to it."
          }
        ],
        "optional": [
          {
            "name": "direction",
            "type": "string",
            "description": "Main axis direction for laying out children.",
            "valid_values": ["row", "column", "row-reverse", "column-reverse"],
            "default": "row"
          },
          {
            "name": "justify_content",
            "type": "string",
            "description": "How children are distributed along the main axis.",
            "valid_values": ["flex-start", "flex-end", "center", "space-between", "space-around", "space-evenly"],
            "default": "flex-start"
          },
          {
            "name": "align_items",
            "type": "string",
            "description": "How children are aligned along the cross axis.",
            "valid_values": ["flex-start", "flex-end", "center", "stretch", "baseline"],
            "default": "stretch"
          },
          {
            "name": "gap",
            "type": "number",
            "description": "Space in pixels between child layers.",
            "default": 0
          },
          {
            "name": "wrap",
            "type": "string",
            "description": "Whether children wrap to the next line when they overflow.",
            "valid_values": ["nowrap", "wrap", "wrap-reverse"],
            "default": "nowrap"
          },
          {
            "name": "padding",
            "type": "number",
            "description": "Internal padding in pixels around the container's content.",
            "default": 0
          },
          {
            "name": "x",
            "type": "number",
            "description": "Horizontal position of the container on the canvas in pixels.",
            "default": 0
          },
          {
            "name": "y",
            "type": "number",
            "description": "Vertical position of the container on the canvas in pixels.",
            "default": 0
          },
          {
            "name": "width",
            "type": "number",
            "description": "Container width in pixels. If omitted, sized to fit children.",
            "default": null
          },
          {
            "name": "height",
            "type": "number",
            "description": "Container height in pixels. If omitted, sized to fit children.",
            "default": null
          }
        ]
      }
    },
    {
      "name": "add_layer_to_container",
      "id": "add_layer_to_container",
      "description": "Add an existing layer (image or text) as a child of a flex container. The layer's x/y position is ignored while inside the container — its placement is controlled by the container's flex rules.",
      "parameters": {
        "mandatory": [
          {
            "name": "layer_name",
            "type": "string",
            "description": "The name of the layer to add to the container."
          },
          {
            "name": "container_name",
            "type": "string",
            "description": "The name of the flex container to add the layer to."
          }
        ],
        "optional": [
          {
            "name": "order",
            "type": "number",
            "description": "Order of this layer within the container (lower = earlier). Layers default to insertion order.",
            "default": null
          },
          {
            "name": "flex_grow",
            "type": "number",
            "description": "How much this layer should grow relative to siblings to fill extra space.",
            "default": 0
          },
          {
            "name": "flex_shrink",
            "type": "number",
            "description": "How much this layer should shrink relative to siblings when space is tight.",
            "default": 1
          },
          {
            "name": "align_self",
            "type": "string",
            "description": "Override the container's align_items for this specific layer.",
            "valid_values": ["auto", "flex-start", "flex-end", "center", "stretch", "baseline"],
            "default": "auto"
          }
        ]
      }
    },
    {
      "name": "set_flex_layout",
      "id": "set_flex_layout",
      "description": "Arrange a list of existing layers in a flex layout. Creates an implicit container and positions the specified layers according to flexbox rules. This is a convenience operation — for more control, use create_flex_container + add_layer_to_container.",
      "parameters": {
        "mandatory": [
          {
            "name": "layer_names",
            "type": "string[]",
            "description": "Ordered list of layer names to arrange in the flex layout."
          }
        ],
        "optional": [
          {
            "name": "container_name",
            "type": "string",
            "description": "Optional name for the implicit container (for later reference).",
            "default": null
          },
          {
            "name": "direction",
            "type": "string",
            "description": "Main axis direction for laying out children.",
            "valid_values": ["row", "column", "row-reverse", "column-reverse"],
            "default": "row"
          },
          {
            "name": "justify_content",
            "type": "string",
            "description": "How children are distributed along the main axis.",
            "valid_values": ["flex-start", "flex-end", "center", "space-between", "space-around", "space-evenly"],
            "default": "flex-start"
          },
          {
            "name": "align_items",
            "type": "string",
            "description": "How children are aligned along the cross axis.",
            "valid_values": ["flex-start", "flex-end", "center", "stretch", "baseline"],
            "default": "stretch"
          },
          {
            "name": "gap",
            "type": "number",
            "description": "Space in pixels between layers.",
            "default": 0
          },
          {
            "name": "wrap",
            "type": "string",
            "description": "Whether children wrap to the next line when they overflow.",
            "valid_values": ["nowrap", "wrap", "wrap-reverse"],
            "default": "nowrap"
          },
          {
            "name": "x",
            "type": "number",
            "description": "Horizontal position of the layout on the canvas in pixels.",
            "default": 0
          },
          {
            "name": "y",
            "type": "number",
            "description": "Vertical position of the layout on the canvas in pixels.",
            "default": 0
          },
          {
            "name": "width",
            "type": "number",
            "description": "Layout width in pixels. If omitted, sized to fit children.",
            "default": null
          },
          {
            "name": "height",
            "type": "number",
            "description": "Layout height in pixels. If omitted, sized to fit children.",
            "default": null
          }
        ]
      }
    }
  ]
}
